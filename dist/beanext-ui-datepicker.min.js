"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="bui.datepicker"),angular.module("bui.datepicker",[]).directive("buiDatepicker",["$compile","$parse",function(a,b){return{restrict:"AE",require:"?ngModel",template:"<bui-datepicker-container></bui-datepicker-container>",replace:!0,link:function(c,d,e,f){function g(a,b){return b=b||"_",a.replace(h,function(a,c){return(c?b:"")+a.toLowerCase()})}var h=/[A-Z]/g;f=f?f:{$setViewValue:angular.noop};var i=function(a){var b=a.cal.getNewDateStr();c.$apply(function(){f.$setViewValue(b)})},j=function(){return i(window.$dp)},k=e.showClear?"true"===e.showClear:!0,l=e.showOk?"true"===e.showOk:!0,m=e.showToday?"true"===e.showToday:!0,n={isShowClear:k,isShowOk:l,isShowToday:m,oncleared:function(){c.$apply(function(){f.$setViewValue("")})},onpicked:i,dchanged:j,Mchanged:j,ychanged:j,Hchanged:j,mchanged:j,schanged:j,skin:"ext",dateFmt:"yyyy-MM-dd"};if(e.dateFmt){try{n.dateFmt=b(e.dateFmt)(c)}catch(o){}angular.isString(n.dateFmt)||(n.dateFmt=e.dateFmt)}angular.forEach(["minDate","maxDate"],function(a){if(e[a]){var d=e[a];n[a]={};try{n[a].value=b(d)(c),n[a].varible=d}catch(f){n[a].value=d}void 0===n[a].value&&(n[a].value="")}});var p=function(h,i){var j=angular.element("<input type='text'/>"),k=angular.element("<div></div>");k.append(j);for(var l in e)if("buiDatepicker"!==l)try{j.attr(g(l,"-"),e[l])}catch(m){}if(j=a(k.html())(c),d.empty(),d.append(j),j.bind("change",function(){c.$apply(function(){f.$setViewValue(j.val())})}),j.bind("click",function(){var a,c={};for(var d in n)if(angular.isObject(n[d]))if(n[d].varible){var e;try{e=b(n[d].varible)}catch(f){}n[d].value!==e&&(a=!0,n[d].value=e)}else void 0!==n[d].value?c[d]=n[d].value:c[d]=n[d];else c[d]=n[d];window.WdatePicker(c)}),j.attr("readOnly","readOnly"),d.hasClass("form-control")){var o='<span class="fa fa-calendar fa-lg form-control-feedback" style="padding-top: 10px;"></span>';d.removeClass("form-control").parent().addClass("has-feedback"),j.addClass("form-control"),j.before(o)}};c.$watch(n,p,!0)}}}]);